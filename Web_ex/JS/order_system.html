<!DOCTYPE HTML>
<html>
<head>
	<meta charset="BIG5" />
	<title>order_system</title>
<script type="text/javascript">	

	var tab= document.getElementById("tab");
	var total1,total2,total3, total4=0;
	
	function ck1(node)
	{		
		var notebook = document.getElementById("notebook");
		var ck1 = node.parentNode.parentNode;
		var ntbk  = document.getElementById("ntbk");
		var ntbk_val=ntbk.options[ntbk.selectedIndex].text;//數量
		//console.log(node);//點擊的節點
		//console.log(node.parentNode);//點擊的父節點<td>
		//console.log(node.parentNode.parentNode);//點擊的父父節點<tr>
		//console.log(node.parentNode.parentNode.parentNode);//點擊的父父父節點，全部的<tr>
		if(notebook.checked)
		{	
			if(ntbk_val==0)
			{
				alert("請先選數量");
				notebook.checked=false;
			}
			else
			{
			ck1.classList.add("ck_color");//增加列的顏色	
			total1 = parseInt(price1.innerHTML);
			total4 += total1;
			}
				
		}
		else
		{
			ck1.classList.remove("ck_color");//移除列的顏色
			total4 -= total1;
		}		
		
	}
	
	function ck2(node)
	{		
		var phone = document.getElementById("phone");
		var ck2 = node.parentNode.parentNode;
		var price2 = document.getElementById("price2");//金額
		var ph = document.getElementById("ph");
		var ph_val=ph.options[ph.selectedIndex].text;//數量
		if(phone.checked)
		{			
			if(ph_val==0)
			{
				alert("請先選數量");
				phone.checked=false;
			}
			else
			{
				ck2.classList.add("ck_color");//增加列的顏色	
				total2 = parseInt(price2.innerHTML);
				total4 += total2;	
			}			
		}
		else
		{
			ck2.classList.remove("ck_color");//移除列的顏色
			total4 -= total2;
		}		
	}
	
	function ck3(node)
	{		
		var printer = document.getElementById("printer");
		var ck3 = node.parentNode.parentNode;
		var pt = document.getElementById("pt");
		var pt_val=pt.options[pt.selectedIndex].text;//數量
		if(printer.checked)
		{		
			if(pt_val==0)
			{
				alert("請先選數量");
				printer.checked=false;
			}
			else
			{
			ck3.classList.add("ck_color");//增加列的顏色	
			total3 = parseInt(price3.innerHTML);	
			total4 += total3;
			}
		}
		else
		{
			ck3.classList.remove("ck_color");//移除列的顏色
			total4 -= total3;
		}		
	}
	
	function price ()
	{
		var notebook = document.getElementById("notebook");
		var phone = document.getElementById("phone");
		var printer = document.getElementById("printer");
		var unit_price1 = document.getElementById("unit_price1").innerHTML; //單價
		var unit_price2 = document.getElementById("unit_price2").innerHTML; //單價
		var unit_price3 = document.getElementById("unit_price3").innerHTML; //單價
		var price1 = document.getElementById("price1");//金額
		var price2 = document.getElementById("price2");//金額
		var price3 = document.getElementById("price3");//金額
		
		var ntbk  = document.getElementById("ntbk");
		var ntbk_val=ntbk.options[ntbk.selectedIndex].text;//數量
		
		var ph = document.getElementById("ph");
		var ph_val=ph.options[ph.selectedIndex].text;//數量
	
		var pt = document.getElementById("pt");
		var pt_val=pt.options[pt.selectedIndex].text;//數量
			
		price1.innerHTML=unit_price1 * ntbk_val;
		price2.innerHTML=unit_price2 * ph_val;
		price3.innerHTML=unit_price3 * pt_val;		
		
		all_total.innerHTML = total4;
	}
</script>
</head>

<style>
.wid{
width:1000px;
text-align:center;
}
.ck_color{
background:yellow;
}
</style>

<body>
<table id=tab border=1 align=center class=wid onchange="price();">
	<tr>
		<td>是否訂購</td>
		<td>商品名稱</td>
		<td>單價</td>
		<td>數量</td>
		<td>金額</td>
		<td>備註</td>
	</tr>

	<tr>
		<td><input type=checkbox id=notebook onclick="ck1(event.target);"></td><!--this 本身點選的物件 event.targe點擊事件-->
		<td>筆記型電腦</td>
		<td id="unit_price1">40000</td>
		<td>
			<select id="ntbk" name="ntbk">
			<option selected>0</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
		</td>
		<td id=price1>0</td>
		<td></td>
	</tr>

	<tr>
		<td><input type=checkbox id=phone onclick="ck2(event.target);"></td>
		<td>高階手機</td>
		<td id="unit_price2">20000</td>
		<td>
			<select id="ph" name="ph">
			<option selected>0</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
		</td>
		<td id=price2>0</td>
		<td></td>
	</tr>

	<tr>
		<td><input type=checkbox id=printer onclick="ck3(event.target);"></td>
		<td>雷射印表機</td>
		<td id="unit_price3">15000</td>
		<td>
			<select id="pt" name="pt">
			<option selected>0</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
		</td>
		<td id=price3>0</td>
		<td></td>
	</tr>

	<tr>
		<td colspan=3>合計</td>
		<td>0</td>
		<td id=all_total>0</td>
		<td></td>
	</tr>

</table>
</body>

</html>